
<link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
<link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0" />
<link rel="stylesheet" href="css/generations/styles.css" type="text/css">
<link rel="stylesheet" href="css/generations/gallery.css" type="text/css">
<link rel="stylesheet" href="css/generations/reft.css" type="text/css">
<link rel="stylesheet" href="css/generations/regeneration.css" type="text/css">
<link rel="stylesheet" href="css/generations/refresh.css" type="text/css">
<link rel="stylesheet" href="https://rr720.synology.me/paint/css/main.css" type="text/css">
<link rel="Stylesheet" type="text/css" href="https://rr720.synology.me/paint/lib/wColorPicker.min.css" />
<link rel="Stylesheet" type="text/css" href="https://rr720.synology.me/paint/wPaint.min.css" />
<link rel="stylesheet" href="css/chatbot/style.css"/>

<script src="js/generations/buttons.js" defer></script>
<script src="js/generations/image.js"></script>
<script src="js/generations/sample.js"></script>
<script src="js/generations/gallery.js" defer></script>

<style>
    /* ë°°ê²½ ì´ë¯¸ì§€ ì„¤ì •ì„ ìœ„í•œ ì»¤ìŠ¤í…€ CSS */
    body {
        background-image: url('img/bg/gbg.png'); 
        background-size: cover;           
        background-position: center;      
        background-repeat: no-repeat;     
        height: 100vh;                    
    }
</style>

<!-- first loading -->
<div class="vw-100 min-vh-100 position-fixed z-3 display-none" style="background-color: #ffffff;" id="first-loading">
    <div class="spinner-grow text-dark position-fixed top-50 start-50 translate-middle z-3" role="status"
        style="width: 4rem; height: 4rem;"></div>
</div>

<div class="bg-white opacity-75 position-fixed z-3 display-none" id="wrap-loading">
    <div class="spinner-grow text-dark position-fixed z-3" role="status"></div>
</div>
<!-- <h1 class="text-center mb-4">whyding 8ì¡°</h1> -->
<div>
    <div class="row mt-2" id="gbg">
        <section class="col-12 col-md-8 mt-2">
            <div class="accordion-body d-flex justify-content-center align-items-center">
                <!-- gallery -->
                <div class="col" id="gallery-area">
                    <div class="row" id="gal-refreshgallery-area">
                        <!-- gallery refresh -->
                        <div class="col-2 text-center">
                            <button class="btn btn-outline-dark btn-sm fw-lighter"
                                id="gal-refreshButton">Refresh</button>
                        </div>
                        <!-- gallery style -->
                        <div class="col-7 d-flex justify-content-center align-items-center">
                            <form method="post" action="" id="check-style-area">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="form-switch d-flex align-items-center">
                                        <input type="checkbox" role="switch" name="checkStyle[]" value="white" checked
                                            id="white">
                                        <label class="d-block text-dark-emphasis fw-lighter ms-2"
                                            style="cursor: default;" for="white">white</label>
                                    </div>
                                    <div class="form-switch d-flex align-items-center">
                                        <input type="checkbox" role="switch" name="checkStyle[]" value="black" checked
                                            id="black">
                                        <label for="black" class="d-block text-dark-emphasis fw-lighter ms-2"
                                            style="cursor: default;">black</label>
                                    </div>
                                    <div class="form-switch d-flex align-items-center">
                                        <input type="checkbox" role="switch" name="checkStyle[]" value="color" checked
                                            id="color">
                                        <label class="d-block text-dark-emphasis fw-lighter ms-2"
                                            style="cursor: default;" for="color">color</label>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <div class="col-2 text-center">
                            <select class="btn btn-sm btn-outline-dark dropdown-toggle" role="button"
                                data-bs-toggle="dropdown" aria-expanded="false" id="gal-quarter">
                                <option value="dress">ë“œë ˆìŠ¤</option>
                                <option value="tuxedo">í„±ì‹œë„</option>
                            </select>
                        </div>

                    </div>
                    <!-- gallery bottom -->
                    <div id="gal-text-area"></div>
                    <div class="gallery-images">
                    </div>
                    <p class="text-center text-body-secondary fw-lighter mt-3 fs-6" id="gal-text-center">
                        ìœ„ì˜ ì´ë¯¸ì§€ëŠ” ì¸ê³µì§€ëŠ¥ ê¸°ìˆ ì„ í™œìš©í•˜ì—¬ ìƒì„±ëœ ì´ë¯¸ì§€ë¡œ, ì‹¤ì œ ì¸ë¬¼ê³¼ëŠ” ê´€ë ¨ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                </div>
            </div>
        </section>
        <section class="col-12 col-md-4 d-flex flex-column justify-content-center align-items-center mt-2">
            <div class="imageContainerSource col-md-4 flex-column justify-content-center align-items-center"
                style=" width: 100%;">
                <div class="image-box" id="source_image">
                    <!-- ì‹¤ì œ íŒŒì¼ ì…ë ¥ í•„ë“œ (ìˆ¨ê²¨ì ¸ ìˆìŒ) -->
                    <input class="form-control-file" type="file" id="imageUploadSource" accept="image/jpeg, image/png"
                        style="display: none;">
                    <div class="error" id="errorSource"></div>

                    <!-- ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€ -->
                    <img src="" alt="ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€" style="width: 20vh; border-radius: 50px; object-fit: contain;"
                        id="previewSource">

                    <div class="d-flex justify-content-center align-items-center">
                        <label class="btn btn-outline-secondary btn-sm mt-3" style="width: auto;"
                            for="imageUploadSource">
                            <i class="bi bi-file-earmark-arrow-up"></i>ë‚´ ì–¼êµ´ ì—…ë¡œë“œ</label>
                    </div>
                </div>
            </div>

            <div class="imageContainertarget col-md-7 flex-column justify-content-center align-items-center"
                style=" width: 100%;">
                <!-- ì´ë¯¸ì§€ ë°•ìŠ¤ -->
                <div class="col image-box d-flex justify-content-center align-items-center" id="target_image">
                    <div id="errorTarget" class="error"></div>
                    <!-- <img id="previewTarget" src="" alt="ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€" style="width: 25vh; display: none;"> -->
                    <img id="previewTarget" src="" alt="ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€"
                        style="width: 20vh; height: 30vh; background-color: #ccc; border-radius: 50px;">

                    <div class="overlay-buttons row">
                        <!-- ì¬ìƒì„±ë²„íŠ¼ -->
                        <!-- <button class="btn btn-light btn-sm mt-2 shadow"
                            style="width: auto; min-width: 150px; height: auto; white-space: nowrap;"
                            id="gen-generateButton">
                            Regenerate
                        </button> -->
                    </div>
                </div>
                <!-- ìŠ¤íŒ¨ë„ˆ -->
                <!-- ìƒì„±ë²„íŠ¼ -->
                <div class="d-flex justify-content-center align-items-center">
                    <button class="btn btn-dark btn-sm "
                        style="width: auto; min-width: 150px; height: auto; white-space: nowrap; cursor: pointer; display: none;"
                        id="createImageButton">
                        ì°©ìš©í•˜ê¸°
                    </button>
                    <div class="spinner-border text-dark" role="status" id="spinner">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <div style="display: none;" id="gen-error-text">Please upload or select an image</div>
                    </p>
                </div>
            </div>

        </section>
    </div>
</div>
<!-- ìƒë‹¨: ë‘ ì´ë¯¸ì§€ ì¡°í•© ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ëŠ” ì˜ì—­ -->
<div class="image-result row" id="imageResult" style="display: none;">
    <div class="image-container">
        <img src="" alt="ì¡°í•©ëœ ì´ë¯¸ì§€" id="combinedImage">
    </div>
    <div class="button-container">
        <button id="closeButton" class="btn btn-dark btn-sm" onclick="closeResult()">ë‹«ê¸°</button>
        <button id="SetProfile" class="btn btn-dark btn-sm">
            <i class="bi bi-file-person"></i>&nbsp;í”„ë¡œí•„ ë³€ê²½
        </button>
        <button id="saveButton" class="btn btn-dark btn-sm">
            <i class="bi bi-folder-plus"></i>&nbsp;ë³´ê´€
        </button>
        <button id="downloadButton" class="btn btn-success btn-sm" onclick="downloadImage()"><i
                class="bi bi-file-arrow-down"></i>&nbsp;ë‹¤ìš´ë¡œë“œ</button>
    </div>

    <!-- í”¼ë“œë°± ê³µê°„ -->
    <div class="feedback-section d-flex flex-column align-items-center mt-3">
        <!-- <p class="text-light mt-2 fs-6">í”¼ë“œë°±ì„ ë‚¨ê²¨ì£¼ì„¸ìš”</p> -->
        <div class="input-container position-relative" style="width: 40%;">
            <textarea class="form-control rounded-3" style="font-size: 0.7rem" id="feedbackText" rows="4"
                placeholder="ê·€ì¤‘í•œ ì‹œê°„ì„ ë‚´ì…”ì„œ ì°¸ì—¬í•´ ì£¼ì‹  ë§Œí¼ ì¢‹ì€ í”¼ë“œë°±ì„ ë‚¨ê²¨ì£¼ì‹  ë¶„ê»˜ ì¶”ì²¨ì„ í†µí•´ ìƒí’ˆì„ ë“œë¦´ ì˜ˆì •ì…ë‹ˆë‹¤." onfocus="clearPlaceholder()"
                onblur="restorePlaceholder()"></textarea>
            <button class="btn btn-dark btn-sm position-absolute bottom-0 end-0 mb-2 me-2" id="submitFeedback"
                onclick="submitFeedback()">ì œì¶œ</button>
        </div>
    </div>
</div>

<div class="image-edit z-2" id="image-edit" style="display: none;">
    <!-- í”„ë¡¬í”„íŠ¸ ì…ë ¥ ì°½-->
    <section class="col-12 col-md-8 mt-2">
        <div class="d-flex justify-content-center" id="accordionMain">
            <!-- ì²´í¬ë°•ìŠ¤ ì¶”ê°€ -->
            <div id="wpDrop-area-div"
                class="accordion-body d-flex flex-column justify-content-center align-items-center mt-4 mb-4"
                style="display: none; ">
                <!-- wPaint -->
                <div id="wPaint" class="dropzone"></div>
                <div id="wpBGbutton-area" class="d-flex flex-wrap justify-content-center align-items-center w-100">
                    <!-- ë°°ê²½ ì´ë¯¸ì§€ ë²„íŠ¼ ì˜ˆì‹œ (ì£¼ì„ì²˜ë¦¬ëœ ë¶€ë¶„) -->
                    <!-- <img class="wpBGbutton" src="img/wpBG/bg00.jpg"></button> -->
                </div>

            </div>
            <div class="row d-flex flex-column align-items-center justify-content-center" style="margin-top: 3.8rem;">
                <div class="mb-3" style="font-size: 0.6rem">
                    <label for="exampleFormControlTextarea1" class="form-label text-white">prompt</label>
                    <textarea class="form-control" id="exampleFormControlTextarea1" rows="5"></textarea>
                </div>
                <div class="mb-3" style="font-size: 0.6rem">
                    <label for="exampleFormControlTextarea2" class="form-label text-white">N prompt</label>
                    <textarea class="form-control" id="exampleFormControlTextarea2" rows="3"></textarea>
                </div>
                <p class="text-white" style="font-size: 0.6rem" id="creativityText">
                    Creativity
                </p>
                <div class="d-flex justify-content-center align-items-center">
                    <button class="btn btn-sm btn-light" id="increase">+</button>
                    <input type="range" min="0.45" max="0.7" value="0.55" step="0.001" class="Denoisingslider"
                        id="DenoisingRange" style="direction: rtl;">
                    <button class="btn btn-sm btn-light" id="decrease">-</button>
                </div>
                <!-- ìŠ¤í”¼ë„ˆ -->
                <div class="spinner-border text-light mt-4 mb-2" role="status" id="spinner-re" style="display: none;">
                </div>
                <div class="mt-4" id="wpButton-area">
                    <input type="file" id="fileInput" style="display: none;" onchange="handleFileSelect(event)">
                    <input type="file" id="uploadInput" style="display: none;" onchange="handleFileSelect(event)">
                    <!-- <button id="wpClear" class="btn btn-sm me-2 mb-4">Image Reset</button> -->

                    <button id="wpreset" class="btn btn-outline-light btn-sm me-2 mb-4"> <i
                            class="bi bi-arrow-repeat"></i> </button>
                    <button id="wpClose" class="btn btn-outline-light  btn-sm me-2 mb-4"> ë‹«ê¸° </button>
                    <button id="wpGen" class="btn btn btn-dark  btn-sm me-2 mb-4"> ìƒì„± </button>
                    <button id="wpApp" class="btn btn-light  btn-sm me-2 mb-4"> ì ìš© </button>
                </div>
            </div>
        </div>

</div>


<script>
    $(document).ready(function () {
        // í˜ì´ì§€ê°€ ë¡œë“œë˜ë©´ #wrap-loadingì˜ display-none í´ë˜ìŠ¤ë¥¼ ì œê±°í•˜ê³ , ì„œì„œíˆ ë³´ì´ê²Œ í•¨
        $('#wrap-loading').removeClass('display-none').fadeIn(500); // 0.5ì´ˆ ë™ì•ˆ ì„œì„œíˆ ë‚˜íƒ€ë‚¨

        // 2ì´ˆ í›„ì— #wrap-loadingì„ ì„œì„œíˆ ìˆ¨ê¸°ê¸°
        setTimeout(function () {
            $('#wrap-loading').fadeOut(1000, function () {
                // fadeOutì´ ëë‚œ í›„ display-none í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•˜ì—¬ ì™„ì „íˆ ìˆ¨ê¹€
                $(this).addClass('display-none');
            });
        }, 1000); // 2ì´ˆ í›„
    });
    $(document).ready(function () {
        var wpaintImageUrl = null
        // var ajaxBase64Image = null
        // var wpaintFi = null

    })
</script>
<script>
    // í…ìŠ¤íŠ¸ ì…ë ¥ì°½ í´ë¦­ ì‹œ ì•ˆë‚´ ë¬¸êµ¬ ì‚¬ë¼ì§€ê¸°
    function clearPlaceholder() {
        const feedbackText = document.getElementById('feedbackText');
        // ê¸°ë³¸ placeholder ë‚´ìš©ì´ í‘œì‹œë  ë•Œë§Œ í…ìŠ¤íŠ¸ë¥¼ ì§€ì›€
        if (feedbackText.value === feedbackText.placeholder) {
            feedbackText.value = '';
        }
    }

    // í…ìŠ¤íŠ¸ ì…ë ¥ì°½ í´ë¦­ í›„ ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ì•ˆë‚´ ë¬¸êµ¬ ë³µì›
    function restorePlaceholder() {
        const feedbackText = document.getElementById('feedbackText');
        // ì‚¬ìš©ìê°€ ì•„ë¬´ê²ƒë„ ì…ë ¥í•˜ì§€ ì•Šì•˜ë‹¤ë©´ placeholder ë³µì›
        if (feedbackText.value === '') {
            feedbackText.value = feedbackText.placeholder;
        }
    }

    // í”¼ë“œë°± ì œì¶œ ì²˜ë¦¬ (ì¶”ê°€ êµ¬í˜„ í•„ìš”)
    function submitFeedback() {
        const feedbackText = document.getElementById('feedbackText').value;
        if (feedbackText && feedbackText !== feedbackText.placeholder) {
            // ì„œë²„ë¡œ í”¼ë“œë°± ì „ì†¡ ì½”ë“œ ì¶”ê°€
            alert('í”¼ë“œë°±ì´ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤!');
        } else {
            alert('í”¼ë“œë°±ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        }
    }
</script>
<script>
    $('#gen-generateButton').click(function () {
        $('#image-edit').toggle(); // #imageResultì˜ display ì†ì„±ì„ í† ê¸€ (ë³´ì´ê¸°/ìˆ¨ê¸°ê¸°)
        $("#wPaint").wPaint("image", wpaintImageUrl);
    });
    $('#wpClose').click(function () {
        $('#image-edit').toggle(); // #imageResultì˜ display ì†ì„±ì„ í† ê¸€ (ë³´ì´ê¸°/ìˆ¨ê¸°ê¸°)
    });

    $('#wpreset').click(function () {
        $("#wPaint").wPaint("image", wpaintImageUrl);
    });

    $('#wpApp').click(function () {
        $('#previewTarget').attr('src', wpaintRe).show();
        imageBase64Target = wpaintFi
        $('#image-edit').toggle();
    });
</script>

<!-- <link rel="stylesheet" href="css/chatbot/style.css" /> -->
<!-- <script src="js/chatbot/script.js" defer></script> -->

<button class="chatbot-toggler">
    <span class="material-symbols-rounded">mode_comment</span>
    <span class="material-symbols-outlined">close</span>
</button>
<div class="chatbot">
    <header>
        <h2 class="mt-2">Whyding ì±—ë´‡</h2>
        <span class="close-btn material-symbols-outlined">close</span>
    </header>
    <ul class="chatbox">
        <li class="chat incoming">
            <img src="img/chatbot/ch.png" alt="smart_toy" style="width: 35px; height: 35px;">
            <p>ì•ˆë…•! ğŸ‘‹<br/>ì›¨ë”© ì´¬ì˜ ì¤€ë¹„ì— ë„ì›€ì„ ì¤„ê²Œ! <br/>ì›í•˜ëŠ” ì›¨ë”© ì´ë¯¸ì§€ë¥¼ ì˜¬ë¦¬ë©´ ì ì ˆí•œ í”„ë¡¬í”„íŠ¸ë¥¼ ì°¾ì•„ì¤„ê²Œ!! </p>
        </li>
    </ul>
    <div class="chat-input d-flex justify-content-center ">
        <label class="material-symbols-rounded fs-6 my-3" for="image-upload" >
            add_photo_alternate
            <span class="fs-6 my-3">ì´ë¯¸ì§€ ì—…ë¡œë“œ</span>
        </label>
        <input type="file" id="image-upload" accept="image/*" style="display: none;">
    </div>
    <style>
        /* ë§ˆìš°ìŠ¤ ì˜¬ë¦¬ë©´ ì†ê°€ë½ ëª¨ì–‘ìœ¼ë¡œ ë³€ê²½ë˜ê³ , íˆ¬ëª…ë„ 0.5 */
        .chat-input label {
            cursor: pointer;
            transition: opacity 0.3s ease;
        }
    
        .chat-input label:hover {
            opacity: 0.3;
        }
    </style>

<script src="js/generations/ajax.js" defer></script>
<script src="js/generations/ajax_re.js" defer></script>
<script src="js/generations/ajax_article.js" defer></script>

<!-- jQuery UI -->
<script type="text/javascript" src="https://rr720.synology.me/paint/lib/jquery.ui.core.1.10.3.min.js"></script>
<script type="text/javascript" src="https://rr720.synology.me/paint/lib/jquery.ui.widget.1.10.3.min.js"></script>
<script type="text/javascript" src="https://rr720.synology.me/paint/lib/jquery.ui.mouse.1.10.3.min.js"></script>
<script type="text/javascript" src="https://rr720.synology.me/paint/lib/jquery.ui.draggable.1.10.3.min.js"></script>
<!-- wColorPicker -->

<script type="text/javascript" src="https://rr720.synology.me/paint/lib/wColorPicker.min.js"></script>
<!-- wPaint -->
<script type="text/javascript" src="https://rr720.synology.me/paint/wPaint.min.js"></script>
<script type="text/javascript" src="https://rr720.synology.me/paint/plugins/main/wPaint.menu.main.min.js"></script>


<script src="https://rr720.synology.me/paint/js/sub.js"></script>
<script src="js/generations/edit.js"></script>
<script src="js/generations/wpaint.js"></script>

<script src="js/generations/ajax_profile_change.js" defer></script>
<script src="js/chatbot/script.js" defer></script>